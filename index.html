<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SNG's Funky 3D Hustle Board</title>

    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-firestore-compat.js"></script>

    <script src="https://cdn.tailwindcss.com"></script>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Poppins:wght@700;800&display=swap" rel="stylesheet">

    <link rel="manifest" href="manifest.json"> <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="SNG Board">
    <link rel="apple-touch-icon" href="icon-192.png"> <meta name="theme-color" content="#f97316">

    <style>
        /* --- CSS Styles --- */
        :root {
            /* Color variables */
            --column-bg: rgba(17, 24, 39, 0.75); --column-header-text: #f1f5f9;
            --task-bg: #ffffff; --task-text: #1f2937;
            --idea-task-bg: #e2e8f0; --idea-task-text: #334155;
            --accent-todo: #f59e0b; --accent-inprogress: #eab308; --accent-done: #22c55e;
            --button-primary-bg: #dc2626; --button-primary-hover: #b91c1c;
            --button-secondary-bg: #16a34a; --button-secondary-hover: #15803d;
            --button-cancel-bg: #64748b; --button-cancel-hover: #475569;
            --quote-bg: rgba(255, 255, 255, 0.1); --quote-border: rgba(255, 255, 255, 0.3); --quote-text: #f8fafc;
            --summary-bg: rgba(30, 41, 59, 0.8); --summary-header: #facc15; --summary-text: #cbd5e1; --summary-strong: #fde047;
            --idea-box-bg: rgba(51, 65, 85, 0.8);
            --modal-bg: rgba(17, 24, 39, 0.9); --modal-content-bg: #1f2937;
            --progress-bar-bg: #e5e7eb; /* gray-200 */
            --progress-bar-fill: var(--accent-inprogress); /* Use in-progress accent */
            --timer-text-color: #4b5563; /* gray-600 */
            --timer-text-expired-color: #dc2626; /* red-600 */
        }

        body {
            font-family: 'Inter', sans-serif;
            /* Consider adding a fallback background color or using a local image */
            background-image: url('https://raw.githubusercontent.com/sniting/sng-hustle-board./main/ChatGPT%20Image%20Apr%2030%2C%202025%20at%2007_19_36%20PM.png');
            background-size: cover; background-position: center center; background-repeat: no-repeat; background-attachment: fixed;
            background-color: #374151; /* Fallback color */
            padding: 2rem 1rem 5rem 1rem; color: var(--column-header-text);
            perspective: 1800px; overflow-x: hidden; min-height: 100vh;
        }
        h1, h2, h3 { font-family: 'Poppins', sans-serif; font-weight: 800; letter-spacing: 0.02em; }
        #main-content-wrapper { max-width: 1200px; margin: 0 auto; }
        #main-title { color: #ffffff; text-shadow: 2px 2px 4px rgba(0,0,0,0.6); animation: pulse-glow 3s infinite alternate; }
        #subtitle { color: #f1f5f9; text-shadow: 1px 1px 3px rgba(0,0,0,0.5); }
        @keyframes pulse-glow { from { text-shadow: 2px 2px 4px rgba(0,0,0,0.5), 0 0 5px rgba(255,255,255,0.3); } to { text-shadow: 2px 2px 6px rgba(0,0,0,0.6), 0 0 15px rgba(255,255,255,0.5); } }

        /* Kanban Column Styling */
        .kanban-column {
            min-height: 350px; background-color: var(--column-bg); backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 0.75rem; padding: 1.25rem;
            transition: all 0.35s cubic-bezier(0.25, 0.8, 0.25, 1); box-shadow: 0 10px 20px rgba(0, 0, 0, 0.25);
            transform: rotateX(2deg) rotateY(-1deg); display: flex; flex-direction: column;
        }
        .kanban-column:hover { transform: rotateX(0deg) rotateY(0deg) scale(1.03) translateZ(20px); box-shadow: 0 15px 35px rgba(0, 0, 0, 0.35); }
        .kanban-column h2 {
            color: var(--column-header-text); text-transform: uppercase; font-weight: 700; display: flex;
            align-items: center; justify-content: center; gap: 0.6rem; border-bottom: 2px solid rgba(255, 255, 255, 0.2);
            padding-bottom: 0.75rem; margin-bottom: 1.25rem; flex-shrink: 0;
        }
        .tasks-container { flex-grow: 1; overflow-y: auto; min-height: 100px; padding-top: 5px; }

        /* Task Card Styling (Daily Tasks) */
        .kanban-task {
            background-color: var(--task-bg); color: var(--task-text); border-radius: 0.5rem;
            padding: 0.8rem 1.1rem; margin-bottom: 1rem; cursor: grab; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.25s ease-in-out; word-break: break-word; position: relative;
            border-left: 5px solid var(--accent-todo);
        }
        #inprogress .kanban-task { border-left-color: var(--accent-inprogress); }
        #done .kanban-task { border-left-color: var(--accent-done); }

        .task-content-display {}
        .task-time-info { font-size: 0.8rem; color: #475569; margin-top: 0.4rem; display: block; font-weight: 600; }
        .task-time-info .duration { color: #57534e; margin-left: 0.5rem; font-weight: 500; }
        .task-completion-date { font-size: 0.75rem; color: #64748b; margin-top: 0.25rem; display: block; }

        /* In Progress Timer/Progress Bar Styles */
        .task-progress-container { margin-top: 0.75rem; height: 16px; display: flex; align-items: center; gap: 0.5rem; }
        .progress-bar { flex-grow: 1; height: 8px; background-color: var(--progress-bar-bg); border-radius: 4px; overflow: hidden; }
        .progress-bar-fill { height: 100%; width: 0%; background-color: var(--progress-bar-fill); border-radius: 4px; transition: width 0.5s ease-out; }
        .remaining-time { font-size: 0.75rem; font-weight: 500; color: var(--timer-text-color); white-space: nowrap; flex-shrink: 0; }
        .remaining-time.expired { color: var(--timer-text-expired-color); font-weight: 700; }

        .kanban-task:active:not(.editing) { cursor: grabbing; box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15); transform: scale(1.03); }
        .dragging { opacity: 0.5; transform: rotate(5deg) scale(1.08) skew(-5deg, -2deg); }
        .idea-task.dragging { background-color: #a7f3d0; border: 1px dashed #059669; }
        .drag-over { background-color: rgba(70, 88, 116, 0.8); transform: scale(1.01); }

        /* Confetti Canvas Styling */
        #confetti-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 9999; }

        /* Time/Date/Quote Display Styling */
        #time-date-display, #selected-date-display, #motivational-quote { background-color: rgba(30, 41, 59, 0.6); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); padding: 0.8rem 1.2rem; border-radius: 0.6rem; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15); text-align: center; margin-bottom: 1.5rem; max-width: 550px; margin-left: auto; margin-right: auto; color: #f1f5f9; font-weight: 600; text-shadow: 1px 1px 2px rgba(0,0,0,0.3); transition: all 0.3s ease-out; }
        #time-date-display:hover, #selected-date-display:hover, #motivational-quote:hover { transform: translateY(-4px) scale(1.02); box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2); }
        #selected-date-display { background-color: rgba(51, 65, 85, 0.7); color: #ffffff; font-weight: 700; margin-top: 0.5rem; border-color: rgba(255, 255, 255, 0.3); }
        #motivational-quote { background-color: rgba(17, 24, 39, 0.65); border: 1px solid var(--quote-border); color: var(--quote-text); padding: 1rem 1.2rem; font-size: 1rem; font-weight: 500; font-style: normal; text-shadow: 1px 1px 2px rgba(0,0,0,0.4); margin-bottom: 2rem; }

        /* Date Selector Styling */
        #date-selector-container { text-align: center; margin-bottom: 1.5rem; }
        #date-selector-container label { margin-right: 0.5rem; font-weight: 700; color: #f1f5f9; text-shadow: 1px 1px 2px rgba(0,0,0,0.3); }
        #date-selector { padding: 0.6rem 0.8rem; border: 1px solid rgba(255,255,255,0.3); border-radius: 0.5rem; box-shadow: inset 0 1px 3px 0 rgba(0,0,0,0.1); cursor: pointer; background-color: rgba(30, 41, 59, 0.7); color: #ffffff; font-weight: 500; }

        /* Add Task Form Container Styling */
         #add-task-form-container { background-color: rgba(30, 41, 59, 0.85); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.2); padding: 1.75rem; border-radius: 0.75rem; box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25); transition: all 0.35s cubic-bezier(0.25, 0.8, 0.25, 1); transform: rotateX(1deg) rotateY(1deg); margin-bottom: 2.5rem; }
         #add-task-form-container:hover { transform: rotateX(0deg) rotateY(0deg) scale(1.02) translateZ(15px); box-shadow: 0 12px 25px rgba(0, 0, 0, 0.3); }
        #add-task-form { display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem; align-items: end; }
        #add-task-form > div:nth-child(1) { grid-column: span 2; }
        #add-task-form > div:nth-child(4) { grid-column: span 2; margin-top: 0.5rem; }
        @media (min-width: 768px) { #add-task-form { grid-template-columns: minmax(150px, 3fr) 1fr 1fr auto; gap: 1rem; } #add-task-form > div:nth-child(1) { grid-column: auto; } #add-task-form > div:nth-child(4) { grid-column: auto; margin-top: 0; } }
        #add-task-form label { display: block; font-size: 0.9rem; font-weight: 600; color: #cbd5e1; margin-bottom: 0.4rem; }
        #add-task-form input[type="text"], #add-task-form input[type="time"] { width: 100%; border: 1px solid #475569; border-radius: 0.5rem; padding: 0.6rem 0.9rem; box-shadow: inset 0 1px 3px 0 rgba(0,0,0,0.1); font-size: 0.9rem; background-color: #1e293b; color: #f1f5f9; }
        #add-task-form button { background-color: var(--button-primary-bg); color: white; font-weight: 700; padding: 0.6rem 1.5rem; border-radius: 0.5rem; transition: all 0.2s ease-in-out; box-shadow: 0 3px 6px rgba(0,0,0,0.15); border: none; cursor: pointer; text-transform: uppercase; }
        #add-task-form button:hover { background-color: var(--button-primary-hover); transform: translateY(-2px) scale(1.02); box-shadow: 0 5px 10px rgba(0,0,0,0.2); }

        /* Idea Box Styling */
        #idea-box-container { background-color: var(--idea-box-bg); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 0.75rem; padding: 1.5rem; margin-top: 2.5rem; margin-bottom: 2.5rem; max-width: 6xl; margin-left: auto; margin-right: auto; box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2); }
        #idea-box-container h3 { color: #e0f2fe; text-align: center; margin-bottom: 1rem; font-weight: 700; text-shadow: 1px 1px 2px rgba(0,0,0,0.3); }
        #add-idea-form { display: flex; gap: 0.75rem; margin-bottom: 1.25rem; }
        #idea-task-input { flex-grow: 1; border: 1px solid #475569; border-radius: 0.5rem; padding: 0.6rem 0.9rem; box-shadow: inset 0 1px 3px 0 rgba(0,0,0,0.1); font-size: 0.9rem; background-color: #1e293b; color: #f1f5f9; }
        #add-idea-task-btn { background-color: var(--button-secondary-bg); color: white; font-weight: 600; padding: 0.6rem 1.2rem; border-radius: 0.5rem; transition: all 0.2s ease-in-out; box-shadow: 0 2px 5px rgba(0,0,0,0.15); border: none; cursor: pointer; white-space: nowrap; }
        #add-idea-task-btn:hover { background-color: var(--button-secondary-hover); transform: translateY(-1px) scale(1.02); box-shadow: 0 4px 8px rgba(0,0,0,0.2); }
        #idea-task-list { max-height: 250px; overflow-y: auto; padding-right: 5px; }
        .idea-task { background-color: var(--idea-task-bg); color: var(--idea-task-text); border-radius: 0.375rem; padding: 0.6rem 0.9rem; margin-bottom: 0.75rem; cursor: grab; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08); transition: all 0.2s ease-in-out; word-break: break-word; position: relative; display: flex; justify-content: space-between; align-items: center; border-left: 4px solid #60a5fa; }
         .idea-task span { flex-grow: 1; margin-right: 0.5rem; }
        .idea-task:active { cursor: grabbing; }
        .delete-idea-task-btn { background: none; border: none; color: #ef4444; font-size: 1.1rem; line-height: 1; cursor: pointer; padding: 0.1rem 0.2rem; opacity: 0.5; transition: all 0.2s ease; flex-shrink: 0; }
        .idea-task:hover .delete-idea-task-btn { opacity: 1; }
        .delete-idea-task-btn:hover { transform: scale(1.2); color: #b91c1c; }

        /* Daily Summary Styling */
        #daily-summary { background-color: var(--summary-bg); border: 1px solid rgba(255, 255, 255, 0.15); padding: 1.5rem; border-radius: 0.75rem; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); margin-top: 2.5rem; max-width: 6xl; margin-left: auto; margin-right: auto; }
        #daily-summary h3 { color: var(--summary-header); font-weight: 700; margin-bottom: 0.75rem; }
        #daily-summary p { color: var(--summary-text); font-size: 0.95rem; line-height: 1.6; }
        #daily-summary strong { font-weight: 700; color: var(--summary-strong); }
        #daily-summary .motivation-suffix { display: block; margin-top: 1rem; font-style: italic; color: #93c5fd; }

        /* Edit/Delete Styles (for daily tasks) */
        .task-edit-form { display: flex; flex-direction: column; gap: 0.6rem; }
        .task-edit-form input[type="text"], .task-edit-form input[type="time"] { width: 100%; border: 1px solid #94a3b8; border-radius: 0.375rem; padding: 0.4rem 0.6rem; font-size: 0.875rem; background-color: #f8fafc; color: #1e293b; }
        .task-edit-form .edit-time-inputs { display: flex; gap: 0.6rem; }
        .task-edit-form .edit-time-inputs > div { flex-grow: 1; }
        .task-edit-form .edit-buttons { display: flex; justify-content: flex-end; gap: 0.6rem; margin-top: 0.6rem; }
        .task-edit-form button { padding: 0.3rem 0.7rem; border-radius: 0.375rem; font-size: 0.8rem; font-weight: 700; transition: all 0.2s ease; border: none; cursor: pointer; text-transform: uppercase; }
        .edit-save-btn { background-color: var(--button-secondary-bg); color: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .edit-save-btn:hover { background-color: var(--button-secondary-hover); transform: scale(1.05); box-shadow: 0 3px 6px rgba(0,0,0,0.15); }
        .edit-cancel-btn { background-color: var(--button-cancel-bg); color: #1e293b; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .edit-cancel-btn:hover { background-color: var(--button-cancel-hover); transform: scale(1.05); box-shadow: 0 3px 6px rgba(0,0,0,0.15); }
        .delete-task-btn { position: absolute; top: 0.4rem; right: 0.4rem; background: none; border: none; color: #fca5a5; font-size: 1.2rem; line-height: 1; cursor: pointer; padding: 0.1rem; opacity: 0.4; transition: all 0.2s ease; }
        .kanban-task:hover .delete-task-btn { opacity: 0.8; }
        .delete-task-btn:hover { opacity: 1; color: #ef4444; transform: scale(1.15) rotate(10deg); }
        .kanban-task.editing { cursor: default; border-left-color: var(--button-primary-bg); }

        /* Highlight effect for auto-moved tasks */
        .task-just-moved { background-color: rgba(250, 204, 21, 0.3); animation: highlight-fade 1.8s ease-out; }
        @keyframes highlight-fade { 0% { background-color: rgba(250, 204, 21, 0.6); } 100% { background-color: var(--task-bg); } }

        /* Time Prompt Modal Styling */
        #time-prompt-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.6); backdrop-filter: blur(5px); display: none; align-items: center; justify-content: center; z-index: 10000; }
        #time-prompt-modal.active { display: flex; }
        .modal-content { background-color: var(--modal-content-bg); padding: 2rem; border-radius: 0.75rem; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4); width: 90%; max-width: 400px; border: 1px solid rgba(255, 255, 255, 0.2); }
        .modal-content h3 { color: #e0f2fe; text-align: center; margin-bottom: 1.5rem; font-size: 1.25rem; }
        .modal-content label { display: block; font-size: 0.9rem; font-weight: 600; color: #cbd5e1; margin-bottom: 0.4rem; margin-top: 1rem; }
        .modal-content input[type="time"] { width: 100%; border: 1px solid #475569; border-radius: 0.5rem; padding: 0.6rem 0.9rem; box-shadow: inset 0 1px 3px 0 rgba(0,0,0,0.1); font-size: 0.9rem; background-color: #334155; color: #f1f5f9; }
        .modal-buttons { display: flex; justify-content: flex-end; gap: 0.75rem; margin-top: 2rem; }
        .modal-buttons button { padding: 0.5rem 1.2rem; border-radius: 0.5rem; font-weight: 700; transition: all 0.2s ease; border: none; cursor: pointer; text-transform: uppercase; font-size: 0.9rem; }
        #modal-save-btn { background-color: var(--button-secondary-bg); color: white; }
        #modal-save-btn:hover { background-color: var(--button-secondary-hover); transform: scale(1.03); }
        #modal-cancel-btn { background-color: var(--button-cancel-bg); color: white; }
        #modal-cancel-btn:hover { background-color: var(--button-cancel-hover); transform: scale(1.03); }

    </style>
</head>
<body class="p-4 md:p-8">

    <div id="main-content-wrapper">

        <h1 id="main-title" class="text-5xl font-extrabold text-center mb-2">SNG's Hustle Board</h1>
        <p id="subtitle" class="text-center text-lg mb-6">Plan & Conquer.</p>

        <div id="time-date-display" class="text-base">Loading time...</div>
        <div id="motivational-quote">Loading inspiration...</div>
        <div id="date-selector-container">
            <label for="date-selector">Select Date:</label>
            <input type="date" id="date-selector">
        </div>
        <div id="selected-date-display" class="text-lg">Loading tasks for...</div>

        <div class="mb-10 max-w-xl mx-auto" id="add-task-form-container">
            <h2 class="text-2xl font-bold mb-5 text-center text-slate-100">Add New Hustle (Today)</h2>
            <div id="add-task-form">
                <div>
                    <label for="new-task-input">Task:</label>
                    <input type="text" id="new-task-input" placeholder="Define the next victory..." class="focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent">
                </div>
                <div>
                    <label for="new-task-start-time">Start (Optional):</label>
                    <input type="time" id="new-task-start-time" class="focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent">
                </div>
                <div>
                    <label for="new-task-end-time">End (Optional):</label>
                    <input type="time" id="new-task-end-time" class="focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent">
                </div>
                <div>
                    <button id="add-task-btn" class="w-full">Lock It In</button>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto">
            <div id="todo" class="kanban-column" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" ondrop="handleDrop(event)">
                <h2 class="text-xl mb-5">üéØ To Do</h2>
                <div class="tasks-container">
                </div>
            </div>
            <div id="inprogress" class="kanban-column" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" ondrop="handleDrop(event)">
                <h2 class="text-xl mb-5">üî• In Progress</h2>
                 <div class="tasks-container">
                </div>
            </div>
            <div id="done" class="kanban-column" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" ondrop="handleDrop(event)">
                <h2 class="text-xl mb-5">üèÜ Done!</h2>
                 <div class="tasks-container">
                </div>
            </div>
        </div>

        <div id="idea-box-container">
            <h3 class="text-xl font-bold">üí° Idea Box (Unscheduled Tasks)</h3>
            <div id="add-idea-form">
                <input type="text" id="idea-task-input" placeholder="Capture a new idea..." class="focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent">
                <button id="add-idea-task-btn">Add Idea</button>
            </div>
            <div id="idea-task-list">
                <p class="text-slate-400 text-center italic">Loading ideas...</p>
            </div>
        </div>

        <div id="daily-summary" class="hidden"> <h3 class="text-xl font-bold">Daily Wins Recap!</h3>
            <p id="summary-content">No summary available yet.</p>
        </div>

    </div> <canvas id="confetti-canvas"></canvas>

    <div id="time-prompt-modal">
        <div class="modal-content">
            <h3>Schedule Idea Task</h3>
            <p id="modal-task-text" class="text-slate-300 mb-4 text-center"></p> <div>
                <label for="modal-start-time">Start Time:</label>
                <input type="time" id="modal-start-time">
            </div>
            <div>
                <label for="modal-end-time">End Time:</label>
                <input type="time" id="modal-end-time">
            </div>
            <div class="modal-buttons">
                <button id="modal-cancel-btn">Cancel</button>
                <button id="modal-save-btn">Save to Schedule</button>
            </div>
        </div>
    </div>
    <script src="app.js"></script>

</body>
</html>
